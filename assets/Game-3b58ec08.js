import{j as s,m as t,r as c,A as I}from"./index-476e902f.js";const H=({scores:n,player:l,winner:r,gameMode:d,round:i,winningScore:a})=>s.jsxs("header",{className:"header",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"game-title",children:"Rock Paper Scissors"}),s.jsxs("p",{className:"score-subtitle",children:[d==="classic"?"Classic mode":"RPSLS mode"," ï¿½ Round ",i," ï¿½ First to ",a]})]}),s.jsxs("div",{className:"scoreboard",children:[s.jsxs("div",{className:`score player ${r==="player"?"winner-glow":""}`,children:[s.jsx("p",{className:"score-label",children:l}),s.jsx("p",{className:"score-value",children:n.player})]}),s.jsxs("div",{className:`score computer ${r==="computer"?"winner-glow":""}`,children:[s.jsx("p",{className:"score-label",children:"Computer"}),s.jsx("p",{className:"score-value",children:n.computer})]})]})]}),O={classic:[{key:"rock",icon:"âœŠ",name:"Rock"},{key:"paper",icon:"âœ‹",name:"Paper"},{key:"scissors",icon:"âœŒï¸",name:"Scissors"}],rpsls:[{key:"rock",icon:"âœŠ",name:"Rock"},{key:"paper",icon:"âœ‹",name:"Paper"},{key:"scissors",icon:"âœŒï¸",name:"Scissors"},{key:"lizard",icon:"ðŸ¦Ž",name:"Lizard"},{key:"spock",icon:"ðŸ––",name:"Spock"}]},V={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.06}}},B={hidden:{y:12,opacity:0},visible:{y:0,opacity:1}},D=({onChoice:n,disabled:l,gameMode:r="classic"})=>{const d=O[r];return s.jsxs("div",{className:"controls-container",children:[s.jsx("p",{children:"Choose your weapon"}),s.jsx(t.div,{className:`control-buttons ${r}`,variants:V,initial:"hidden",animate:"visible",children:d.map(i=>s.jsxs(t.button,{className:"choice-btn weapon-btn",onClick:()=>n(i.key),disabled:l,"aria-label":i.name,variants:B,whileHover:{scale:1.06,transition:{type:"spring",stiffness:280}},whileTap:{scale:.95},children:[s.jsx("span",{className:"weapon-icon",children:i.icon}),s.jsx("span",{className:"weapon-label",children:i.name})]},i.key))})]})},g={rock:"âœŠ",paper:"âœ‹",scissors:"âœŒï¸",lizard:"ðŸ¦Ž",spock:"ðŸ––"},P={rock:"Rock",paper:"Paper",scissors:"Scissors",lizard:"Lizard",spock:"Spock"},F={classic:{choices:["rock","paper","scissors"],winConditions:{rock:["scissors"],paper:["rock"],scissors:["paper"]}},rpsls:{choices:["rock","paper","scissors","lizard","spock"],winConditions:{rock:["scissors","lizard"],paper:["rock","spock"],scissors:["paper","lizard"],lizard:["spock","paper"],spock:["scissors","rock"]}}},m=5,U=new Audio("/audio/win.mp3"),Y=new Audio("/audio/lose.mp3"),G=new Audio("/audio/tie.mp3"),_={initial:{opacity:0,scale:.95,y:20},in:{opacity:1,scale:1,y:0},out:{opacity:0,scale:.95,y:-20}},q={type:"tween",ease:"anticipate",duration:.45},M=({player:n,onGameEnd:l,gameMode:r="classic"})=>{const{choices:d,winConditions:i}=F[r],[a,v]=c.useState({player:0,computer:0}),[h,R]=c.useState(null),[x,S]=c.useState(null),[y,C]=c.useState("Pick a weapon to start the round"),[p,b]=c.useState(null),[j,f]=c.useState(!1),[w,z]=c.useState([]),L=w.length+1;c.useEffect(()=>{if(a.player===m||a.computer===m){const e=setTimeout(()=>l(a.player),1500);return()=>clearTimeout(e)}},[a,l]);const T=e=>{j||(f(!0),R(e),S(null),C("Computer is deciding..."),b(null),setTimeout(()=>{const u=d[Math.floor(Math.random()*d.length)];S(u),$(e,u)},650))},$=(e,u)=>{let N=null,k="";e===u?(k="Draw round",G.play().catch(()=>{})):i[e].includes(u)?(k="You win round",v(o=>({...o,player:o.player+1})),N="player",U.play().catch(()=>{})):(k="Computer wins round",v(o=>({...o,computer:o.computer+1})),N="computer",Y.play().catch(()=>{})),C(k),z(o=>[{round:o.length+1,player:e,computer:u,winner:N||"draw"},...o].slice(0,6)),setTimeout(()=>{b(N),f(!1)},260)},A=c.useMemo(()=>p==="player"?"win":p==="computer"?"lose":y.toLowerCase().includes("draw")?"draw":"",[y,p]),E=a.player/m*100,W=a.computer/m*100;return s.jsxs(t.div,{className:"game-area glass-card",initial:"initial",animate:"in",exit:"out",variants:_,transition:q,children:[s.jsx(H,{scores:a,player:n,winner:p,gameMode:r,round:L,winningScore:m}),s.jsxs("section",{className:"match-progress",children:[s.jsxs("div",{className:"progress-row",children:[s.jsx("span",{children:n}),s.jsx("div",{className:"progress-track",children:s.jsx(t.div,{className:"progress-fill player",animate:{width:`${E}%`}})})]}),s.jsxs("div",{className:"progress-row",children:[s.jsx("span",{children:"Computer"}),s.jsx("div",{className:"progress-track",children:s.jsx(t.div,{className:"progress-fill computer",animate:{width:`${W}%`}})})]})]}),s.jsxs("div",{className:"choices",children:[s.jsxs("div",{className:"choice-card",children:[s.jsx("h3",{children:n}),s.jsx(t.div,{className:"choice-btn reveal",animate:{scale:p==="player"?[1,1.15,1]:1},transition:{duration:.25},children:h?g[h]:"?"}),s.jsx("p",{children:h?P[h]:"Waiting"})]}),s.jsxs("div",{className:"choice-card",children:[s.jsx("h3",{children:"Computer"}),s.jsx(t.div,{className:"choice-btn reveal",animate:{scale:p==="computer"?[1,1.15,1]:1},transition:{duration:.25},children:j?"...":x?g[x]:"?"}),s.jsx("p",{children:x?P[x]:j?"Thinking...":"Waiting"})]})]}),s.jsx(I,{mode:"wait",children:s.jsx(t.h2,{className:`result-text ${A}`,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:y},y)}),s.jsx(D,{onChoice:T,disabled:j,gameMode:r}),s.jsxs("section",{className:"round-history",children:[s.jsxs("div",{className:"history-head",children:[s.jsx("h4",{children:"Round Feed"}),s.jsxs("span",{children:["Last ",w.length," rounds"]})]}),w.length===0?s.jsx("p",{className:"history-empty",children:"No rounds yet"}):s.jsx("ul",{className:"history-list",children:w.map(e=>s.jsxs("li",{className:`history-item ${e.winner}`,children:[s.jsxs("span",{children:["R",e.round]}),s.jsxs("span",{children:[g[e.player]," vs ",g[e.computer]]}),s.jsx("strong",{children:e.winner==="draw"?"Draw":e.winner==="player"?"You":"CPU"})]},`r-${e.round}`))})]})]})};export{M as default};
